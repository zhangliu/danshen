<!DOCTYPE html>
<html lang="en">
  <head>
    <script type="text/javascript" src="https://api.map.baidu.com/api?v=1.0&type=webgl&ak=QED9gvY4qVwPLtmWcdB1oZAegDAjWeSs"></script>
  </head>
  <body>
    <div id="allmap"></div>
    <script type="text/javascript">
      if(navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
          function (position) {
            console.log( position.coords.longitude );
            console.log( position.coords.latitude );
            alert(JSON.stringify(position.coords.longitude))
            alert(JSON.stringify(position.coords.latitude))
          },
          function (e) {
            throw(e.message);
          }
        )
      }

      var map = new BMapGL.Map("allmap");
      var point = new BMapGL.Point(116.3150572,39.9999093);
      map.centerAndZoom(point, 12);
      
      var geolocation = new BMapGL.Geolocation();
      geolocation.getCurrentPosition(function(r){
          if(this.getStatus() == BMAP_STATUS_SUCCESS){
              var mk = new BMapGL.Marker(r.point);
              map.addOverlay(mk);
              map.panTo(r.point);
              alert(JSON.stringify(r))
          }
          else {
            console.log('failed' + this.getStatus())
          }        
      });
    </script>
  </body>
</html>
